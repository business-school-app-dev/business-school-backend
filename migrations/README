# ğŸ’° Financial Wellness Center â€” Backend Setup Guide

Welcome to the **UMD Financial Wellness Center Backend**!  
This guide walks you through setting up the backend and local database on your own laptop â€” no prior Postgres or Docker experience needed.

---

## ğŸ§  Overview

**Tech stack:**
- Python (Flask)
- PostgreSQL (Docker container)
- SQLAlchemy ORM
- Alembic for schema migrations

**Goal:**  
Get the backend + database running locally with one command, and be able to run migrations and test endpoints.

---

## âš™ï¸ Prerequisites

Before you start, make sure you have:

1. **Python 3.9 or 3.10**  
   - Check with:
     ```bash
     python --version
     ```
   - [Download Python](https://www.python.org/downloads/) if needed, and check â€œAdd to PATHâ€ during installation.

2. **Docker Desktop**  
   - [Download Docker Desktop](https://www.docker.com/products/docker-desktop/)  
   - Open it once after installing.

> ğŸ’¡ You do *not* need to install PostgreSQL manually â€” weâ€™ll run it in Docker.

---

## ğŸ 1. Clone and Set Up Virtual Environment

```bash
git clone <repo-url>
cd business-school-backend


# Create and activate virtual environment
python -m venv .venv
# On Windows (PowerShell):
.\.venv\Scripts\Activate.ps1
# On macOS/Linux:
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt


ğŸ³ 2. Start the Database (PostgreSQL via Docker)

Run Postgres using the provided Docker Compose file:

docker compose up -d


This will:

Pull the postgres:16 image

Start a container named business-school-backend-db-1

Create:

Database: fwc_db

User: fwc_user

Password: fwc_pass

Expose Postgres on localhost:5433

Verify itâ€™s running:

docker ps


Expected output:

CONTAINER ID   IMAGE         PORTS
xxxxxx         postgres:16   0.0.0.0:5433->5432/tcp

ğŸŒ± 3. Configure Environment Variables

Create a .env file in the project root (same folder as alembic.ini):

DATABASE_URL=postgresql+psycopg://fwc_user:fwc_pass@localhost:5433/fwc_db


We include a .env.example in the repo â€” you can copy it:

cp .env.example .env


ğŸ§© Why port 5433?
Some laptops already use 5432 for another Postgres service, so we use 5433 to avoid conflicts.

ğŸ§© 4. Apply Database Migrations

Alembic creates your tables automatically.
Make sure your venv is active ((.venv) in prompt) and run:

alembic upgrade head


You should see logs like:

INFO  [alembic.runtime.migration] Running upgrade  -> <revision_id>, add users table


This creates all your tables (like users) in the Postgres container.

To confirm:

# Optional, if you have psql installed
psql "postgresql://fwc_user:fwc_pass@localhost:5433/fwc_db" -c "\dt"


Expected:

 Schema |      Name       | Type  |  Owner
--------+-----------------+-------+----------
 public | users           | table | fwc_user
 public | alembic_version | table | fwc_user

ğŸ§  5. Run the Flask Backend

Set your Flask environment variables and start the server:

Windows PowerShell:
$env:FLASK_APP="wsgi.py"
$env:FLASK_ENV="development"
flask run

macOS/Linux:
export FLASK_APP="wsgi.py"
export FLASK_ENV="development"
flask run


Flask should start at:

http://127.0.0.1:5000

ğŸ§ª 6. Test Your Setup

Visit:

http://127.0.0.1:5000/api/v1/health


If you see:

{ "status": "ok" }


youâ€™re officially up and running ğŸ‰

ğŸ§° Common Issues & Fixes
Problem	Fix
âŒ password authentication failed for user "fwc_user"	Check that your .env and alembic.ini use port 5433, not 5432.
âŒ connection refused	Docker isnâ€™t running or port not mapped â€” run docker ps and confirm 5433->5432/tcp.
âŒ ModuleNotFoundError: No module named 'app'	Make sure you run Alembic from the project root (where alembic.ini lives), and app/__init__.py exists.
âŒ Port 5433 already in use	Edit docker-compose.yml â†’ change 5433:5432 to 5434:5432, and update .env + alembic.ini.
ğŸ§© 7. Quick Commands Cheat Sheet
# Start DB
docker compose up -d

# Stop DB
docker compose down

# Run migrations
alembic upgrade head

# Create new migration after model change
alembic revision --autogenerate -m "add new table"

# Check tables
psql "postgresql://fwc_user:fwc_pass@localhost:5433/fwc_db" -c "\dt"

# Run Flask API
flask run

ğŸ§  Developer Notes

All models live in app/models.py

Migrations live in migrations/versions/

Database URL standard:
postgresql+psycopg://fwc_user:fwc_pass@localhost:5433/fwc_db

Donâ€™t commit your local .env file â€” itâ€™s in .gitignore

Everyoneâ€™s DB setup is reproducible via Docker + Alembic